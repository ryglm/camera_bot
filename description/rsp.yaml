/ugv/robot_state_publisher:
  ros__parameters:
    robot_description: |
      <?xml version="1.0" ?>
      <!-- =================================================================================== -->
      <!-- |    This document was autogenerated by xacro from /home/coldburn/install/steering_wheel/share/steering_wheel/description/steer.urdf.xacro | -->
      <!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
      <!-- =================================================================================== -->
      <robot name="steer">
        <material name="body_material">
          <color rgba="0.615686 0.811765 0.929412 1"/>
        </material>
        <material name="knuckles_material">
          <color rgba="0.231373 0.380392 0.705882 1"/>
        </material>
        <material name="wheel_material">
          <color rgba="0.647059 0.647059 0.647059 1"/>
        </material>
        <material name="knuckles_2_material">
          <color rgba="0.231373 0.380392 0.705882 1"/>
        </material>
        <material name="wheel_2_material">
          <color rgba="0.647059 0.647059 0.647059 1"/>
        </material>
        <material name="wheel_3_material">
          <color rgba="0.647059 0.647059 0.647059 1"/>
        </material>
        <material name="wheel_4_material">
          <color rgba="0.647059 0.647059 0.647059 1"/>
        </material>
        <!-- ===== Links (via macros) ===== -->
        <link name="body">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="3.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.03"/>
          </inertial>
          <visual>
            <origin rpy="0 -0 0" xyz="0.00637695 0.0201042 -0.0232289"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/body.stl"/>
            </geometry>
            <material name="body_material"/>
          </visual>
          <collision>
            <origin rpy="0 -0 0" xyz="0.00637695 0.0201042 -0.0232289"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/body.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="knuckles">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="3.14159 -0 -0.289269" xyz="1.38778e-17 -1.38778e-17 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/knuckles.stl"/>
            </geometry>
            <material name="knuckles_material"/>
          </visual>
          <collision>
            <origin rpy="3.14159 -0 -0.289269" xyz="1.38778e-17 -1.38778e-17 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/knuckles.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="wheel">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="1.5708 -7.69264e-17 -3.02309" xyz="6.93889e-18 0 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
            <material name="wheel_material"/>
          </visual>
          <collision>
            <origin rpy="1.5708 -7.69264e-17 -3.02309" xyz="6.93889e-18 0 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="knuckles_2">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="-6.23289e-17 2.39654e-17 2.97109" xyz="1.38778e-17 -1.38778e-17 0"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/knuckles.stl"/>
            </geometry>
            <material name="knuckles_2_material"/>
          </visual>
          <collision>
            <origin rpy="-6.23289e-17 2.39654e-17 2.97109" xyz="1.38778e-17 -1.38778e-17 0"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/knuckles.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="wheel_2">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="-1.5708 -1.23593e-16 0.134786" xyz="1.38778e-17 0 2.77556e-17"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
            <material name="wheel_2_material"/>
          </visual>
          <collision>
            <origin rpy="-1.5708 -1.23593e-16 0.134786" xyz="1.38778e-17 0 2.77556e-17"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="wheel_3">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="-1.5708 -9.93006e-17 -0.625192" xyz="0 1.38778e-17 -0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
            <material name="wheel_3_material"/>
          </visual>
          <collision>
            <origin rpy="-1.5708 -9.93006e-17 -0.625192" xyz="0 1.38778e-17 -0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
          </collision>
        </link>
        <link name="wheel_4">
          <inertial>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <mass value="2.0"/>
            <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
          </inertial>
          <visual>
            <origin rpy="1.5708 -4.79097e-17 -0.713125" xyz="0 -1.38778e-17 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
            <material name="wheel_4_material"/>
          </visual>
          <collision>
            <origin rpy="1.5708 -4.79097e-17 -0.713125" xyz="0 -1.38778e-17 0.02"/>
            <geometry>
              <mesh filename="package://steering_wheel/description/assets/wheel.stl"/>
            </geometry>
          </collision>
        </link>
        <!-- ===== Joints (verbatim from your URDF) ===== -->
        <!-- Joint from knuckles to wheel -->
        <joint name="spin_fl" type="continuous">
          <origin rpy="-1.5708 -0 -1.86006" xyz="0.0249198 -0.00741653 0.01"/>
          <parent link="knuckles"/>
          <child link="wheel"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <!-- Joint from body to knuckles -->
        <joint name="steer_fl" type="revolute">
          <origin rpy="0 -0 0" xyz="0.101322 -0.0720623 -0.0512289"/>
          <parent link="body"/>
          <child link="knuckles"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <!-- Joint from knuckles_2 to wheel_2 -->
        <joint name="spin_fr" type="continuous">
          <origin rpy="1.5708 6.23289e-17 -1.7413" xyz="-0.025623 0.00441163 0.01"/>
          <parent link="knuckles_2"/>
          <child link="wheel_2"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <!-- Joint from body to knuckles_2 -->
        <joint name="steer_fr" type="revolute">
          <origin rpy="0 -0 0" xyz="-0.0686778 -0.0720623 -0.0512289"/>
          <parent link="body"/>
          <child link="knuckles_2"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <!-- Joint from body to wheel_3 -->
        <joint name="spin_rl" type="continuous">
          <origin rpy="-0 -1.5708 0" xyz="0.101322 0.0679377 -0.0512289"/>
          <parent link="body"/>
          <child link="wheel_3"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <!-- Joint from body to wheel_4 -->
        <joint name="spin_rr" type="continuous">
          <origin rpy="-0 -1.5708 0" xyz="-0.0686778 0.0679377 -0.0512289"/>
          <parent link="body"/>
          <child link="wheel_4"/>
          <axis xyz="0 0 1"/>
          <limit effort="10" lower="-3.141592653589793" upper="3.141592653589793" velocity="10"/>
        </joint>
        <ros2_control name="ugv_steer_system" type="system">
          <hardware>
            <plugin>gz_ros2_control/GazeboSimSystem</plugin>
            <param name="position_proportional_gain">0.1</param>
            <param name="update_rate">50</param>
          </hardware>
          <!-- Steering knuckles: command position; report pos & vel -->
          <joint name="steer_fl">
            <command_interface name="position"/>
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
          <joint name="steer_fr">
            <command_interface name="position"/>
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
          <!-- Rear wheels: command velocity; report pos & vel -->
          <joint name="spin_rl">
            <command_interface name="velocity"/>
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
          <joint name="spin_rr">
            <command_interface name="velocity"/>
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
          <!-- Front wheel spins: state only (so you can see them spin) -->
          <joint name="spin_fl">
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
          <joint name="spin_fr">
            <state_interface name="position"/>
            <state_interface name="velocity"/>
          </joint>
        </ros2_control>
        <gazebo>
          <plugin filename="libgz_ros2_control-system.so" name="gz_ros2_control::GazeboSimROS2ControlPlugin">
            <!-- ONLY write <parameters> if we got a non-empty absolute path -->
            <parameters>/home/coldburn/install/steering_wheel/share/steering_wheel/config/controllers.yaml</parameters>
            <controller_manager_prefix_node_name>controller_manager</controller_manager_prefix_node_name>
            <robot_param>robot_description</robot_param>
            <robot_param_node>/ugv/robot_state_publisher</robot_param_node>
            <ros>
              <namespace>ugv</namespace>
            </ros>
            <update_rate>50</update_rate>
          </plugin>
        </gazebo>
      </robot>
